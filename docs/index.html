<!doctype html>
<html>
<head>
  <meta charset='utf-8' />
  <title>  | Márla</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='assets/bass.css' rel='stylesheet' />
  <link href='assets/style.css' rel='stylesheet' />
  <link href='assets/github.css' rel='stylesheet' />
  <link href='assets/split.css' rel='stylesheet' />
</head>
<body class='documentation m0'>
    <div class='flex'>
      <div id='split-left' class='overflow-auto fs0 height-viewport-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'></h3>
          <div class='mb1'><code></code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block input'
            type='text' />
          <div id='toc'>
            <ul class='list-reset h5 py1-ul'>
              
                
                <li><a
                  href='#marla'
                  class="h5 bold black caps toggle-sibling">
                  Marla
                  <span class='icon'>▸</span>
                </a>
                
                <div class='toggle-target display-none'>
                  
                  
                    <ul class='list-reset py1-ul pl1'>
                      <li class='h5'><span>Instance members</span></li>
                      
                      <li><a
                        href='#setaudiodirectory'
                        class='regular pre-open'>
                        #setAudioDirectory
                      </a></li>
                      
                      <li><a
                        href='#addfiles'
                        class='regular pre-open'>
                        #addFiles
                      </a></li>
                      
                      <li><a
                        href='#start'
                        class='regular pre-open'>
                        #start
                      </a></li>
                      
                      <li><a
                        href='#playsound'
                        class='regular pre-open'>
                        #playSound
                      </a></li>
                      
                      <li><a
                        href='#playmultisound'
                        class='regular pre-open'>
                        #playMultiSound
                      </a></li>
                      
                      <li><a
                        href='#addlistener'
                        class='regular pre-open'>
                        #addListener
                      </a></li>
                      
                      <li><a
                        href='#addsource'
                        class='regular pre-open'>
                        #addSource
                      </a></li>
                      
                      <li><a
                        href='#setsourceamplitude'
                        class='regular pre-open'>
                        #setSourceAmplitude
                      </a></li>
                      
                      <li><a
                        href='#setsourcespeed'
                        class='regular pre-open'>
                        #setSourceSpeed
                      </a></li>
                      
                      <li><a
                        href='#setsourcereverb'
                        class='regular pre-open'>
                        #setSourceReverb
                      </a></li>
                      
                      <li><a
                        href='#setsourcepan'
                        class='regular pre-open'>
                        #setSourcePan
                      </a></li>
                      
                      <li><a
                        href='#setsourcedelay'
                        class='regular pre-open'>
                        #setSourceDelay
                      </a></li>
                      
                      <li><a
                        href='#setsourcecutoff'
                        class='regular pre-open'>
                        #setSourceCutOff
                      </a></li>
                      
                      <li><a
                        href='#setsourcefile'
                        class='regular pre-open'>
                        #setSourceFile
                      </a></li>
                      
                      <li><a
                        href='#playsource'
                        class='regular pre-open'>
                        #playSource
                      </a></li>
                      
                      <li><a
                        href='#pausesource'
                        class='regular pre-open'>
                        #pauseSource
                      </a></li>
                      
                      <li><a
                        href='#setcontrolchannel'
                        class='regular pre-open'>
                        #setControlChannel
                      </a></li>
                      
                      <li><a
                        href='#removesource'
                        class='regular pre-open'>
                        #removeSource
                      </a></li>
                      
                      <li><a
                        href='#update'
                        class='regular pre-open'>
                        #update
                      </a></li>
                      
                      <li><a
                        href='#sendevent'
                        class='regular pre-open'>
                        #sendEvent
                      </a></li>
                      
                      <li><a
                        href='#addcustomsound'
                        class='regular pre-open'>
                        #addCustomSound
                      </a></li>
                      
                    </ul>
                  
                  
                  
                </div>
                
                </li>
              
                
                <li><a
                  href='#marla'
                  class=" toggle-sibling">
                  Marla
                  <span class='icon'>▸</span>
                </a>
                
                <div class='toggle-target display-none'>
                  
                  
                    <ul class='list-reset py1-ul pl1'>
                      <li class='h5'><span>Instance members</span></li>
                      
                      <li><a
                        href='#setaudiodirectory'
                        class='regular pre-open'>
                        #setAudioDirectory
                      </a></li>
                      
                      <li><a
                        href='#addfiles'
                        class='regular pre-open'>
                        #addFiles
                      </a></li>
                      
                      <li><a
                        href='#start'
                        class='regular pre-open'>
                        #start
                      </a></li>
                      
                      <li><a
                        href='#playsound'
                        class='regular pre-open'>
                        #playSound
                      </a></li>
                      
                      <li><a
                        href='#playmultisound'
                        class='regular pre-open'>
                        #playMultiSound
                      </a></li>
                      
                      <li><a
                        href='#addlistener'
                        class='regular pre-open'>
                        #addListener
                      </a></li>
                      
                      <li><a
                        href='#addsource'
                        class='regular pre-open'>
                        #addSource
                      </a></li>
                      
                      <li><a
                        href='#setsourceamplitude'
                        class='regular pre-open'>
                        #setSourceAmplitude
                      </a></li>
                      
                      <li><a
                        href='#setsourcespeed'
                        class='regular pre-open'>
                        #setSourceSpeed
                      </a></li>
                      
                      <li><a
                        href='#setsourcereverb'
                        class='regular pre-open'>
                        #setSourceReverb
                      </a></li>
                      
                      <li><a
                        href='#setsourcepan'
                        class='regular pre-open'>
                        #setSourcePan
                      </a></li>
                      
                      <li><a
                        href='#setsourcedelay'
                        class='regular pre-open'>
                        #setSourceDelay
                      </a></li>
                      
                      <li><a
                        href='#setsourcecutoff'
                        class='regular pre-open'>
                        #setSourceCutOff
                      </a></li>
                      
                      <li><a
                        href='#setsourcefile'
                        class='regular pre-open'>
                        #setSourceFile
                      </a></li>
                      
                      <li><a
                        href='#playsource'
                        class='regular pre-open'>
                        #playSource
                      </a></li>
                      
                      <li><a
                        href='#pausesource'
                        class='regular pre-open'>
                        #pauseSource
                      </a></li>
                      
                      <li><a
                        href='#setcontrolchannel'
                        class='regular pre-open'>
                        #setControlChannel
                      </a></li>
                      
                      <li><a
                        href='#removesource'
                        class='regular pre-open'>
                        #removeSource
                      </a></li>
                      
                      <li><a
                        href='#update'
                        class='regular pre-open'>
                        #update
                      </a></li>
                      
                      <li><a
                        href='#sendevent'
                        class='regular pre-open'>
                        #sendEvent
                      </a></li>
                      
                      <li><a
                        href='#addcustomsound'
                        class='regular pre-open'>
                        #addCustomSound
                      </a></li>
                      
                    </ul>
                  
                  
                  
                </div>
                
                </li>
              
            </ul>
          </div>
          <div class='mt1 h6 quiet'>
            <a href='https://documentation.js.org/reading-documentation.html'>Need help reading this?</a>
          </div>
        </div>
      </div>
      <div id='split-right' class='relative overflow-auto height-viewport-100'>
        
          
            <div class='keyline-top-not py2'>
  <section class='py2 clearfix'>

    <h2 id='marla' class='mt0'>

    </h2>

    
      <img src="imgs/marla.svg" style="width:20%" />
<p>Márla (pronounced <em>Mawerla</em>) is an audio middleware for Javascript applications. Although it is written for the BabylonJS and Phaser3 game engines, it should work just as well as a standalone audio interface for any JS applications. The fact that Marla wraps the Csound audio programming language makes it an ideal solution for sound synthesis and procedural audio on the web. Marla is licensed under the The MIT License.     </p>
<p><a href="#running_examples">Running the examples</a></p>
<p><a href="#usage">Usage</a></p>
<p><a href="#oneshot_sounds">Playing one-shot sounds</a></p>
<p><a href="#sources_listeners">Sources and listeners</a></p>
<p><a href="#source_types">Types of sources</a></p>
<p><a href="#procedural_events">Writing procedural sounds</a></p>
<p><a href="#realtime_sounds">Controlling sounds in real time</a></p>
<p><a href="#other_js_engines">Adding support for other JS game engine</a></p>
<p><a name="running_examples"></a></p>
<h3>Running the examples</h3>
<p>The easiest way to get going with this framework is to play around with the example projects provided. Clone the repository and from the project root directory start a local web server. Then open any of the examples provided in either the BabylonJS o Phaser3 folders. If Visual Studio Code is your main editor the 'Live Server' extension makes it simple to run folders as local servers. The following .gif outlines the steps required to start running one of the examples. </p>
<img src="imgs/liveServer.gif" style="width:70%" />
<br>
<br>
<br>
<br>
<p><a name="usage"></a></p>
<h3>Usage</h3>
<p>When it comes to using this framework with existing projects, the first thing to do is add the lettucejs folder to your project root directory. You will then need to add the <code>marla.js</code>, <code>marlaInstrs.js</code> and <code>csound.js</code> scripts to your document body. The <code>marla.csd</code> file should be placed one folder up from the <code>lettucejs</code> directory. </p>
<pre class='hljs'>&lt;script src=<span class="hljs-string">"../csound/csound.js"</span>&gt; <span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
&lt;script src=<span class="hljs-string">"../marla.js"</span>&gt; <span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
&lt;script src=<span class="hljs-string">"../marlaInstrs.js"</span>&gt; <span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span></pre>
<p>Once the scripts have been included a new Marla object will beed to be created. This can be done in the <code>didModuleLoad()</code> function that gets called when the sound engine has finished loading all relevant sound modules. In the code below, the marla object is created and the default audio assets directory is set. In this instance Marla is told the "Phaser3" game engine is to be used. You can also specify "BabylonJS". Setting the game engine provides Marla with the information it needs to carry out correct amplitude scaling based on positional vectors. Following the creation of the Marla object a call is made to <a href="/docs/index.html#addfiles"><code>Marla.addFiles()</code></a>. This function adds all the sound files needed for your game to the local file system. You must add all sound files you intend to use in this manner. After the files have been added, a call to <a href="/docs/index.html#start"><code>Marla.start()</code></a> will start the audio. </p>
<pre class='hljs'><span class="hljs-keyword">var</span> marla;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">moduleDidLoad</span>(<span class="hljs-params"></span>) </span>{          
    marla = <span class="hljs-keyword">new</span> Marla(<span class="hljs-string">"Phaser3"</span>);
    marla.setAudioDirectory(<span class="hljs-string">"../audio"</span>);
    marla.addFiles(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-string">'bestSoundEver.mp3'</span>));
    marla.start();
}</pre>
<br>
<br>
<br>
<br>
<p><a name="oneshot_sounds"></a></p>
<h3>Playing one-shot sounds</h3>
<p>To play a one-shot sound just call <a href="/docs/index.html#playsound"><code>Marla.playSound(filename)</code></a>. Ensure that the file you wish to play has already been loaded using the <a href="/docs/index.html#addfiles"><code>Marla.addFiles()</code></a> function. The playSound function also takes some optional parameters which are described in the reference manual. In the code below the sound is triggered with an amplitude reduction of .5, a playback speed of half full rate, and a short time delay of .1 seconds.  </p>
<pre class='hljs'><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.keys.A.isDown)
{   
    marla.playSound(<span class="hljs-string">'bestSoundEver.wav'</span>, {<span class="hljs-attr">amp</span>:<span class="hljs-number">.5</span>, <span class="hljs-attr">delay</span>:<span class="hljs-number">.1</span>, <span class="hljs-attr">speed</span>:<span class="hljs-number">.5</span>});    
}</pre>
<p>Multi-sample one-shot sounds can be created using the <a href="/docs/index.html#playmultisound"><code>Marla.playMultiSound()</code></a> function. This function takes an array of audio files rather than a single one. Marla will randomly choose one file from the list to play each time the function is called. As is the case with all sound playing functions, you must make certain that you have added the files using the <a href="/docs/index.html#addfiles"><code>Marla.addFIles()</code></a> function. </p>
<pre class='hljs'><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.keys.A.isDown)
{   
    marla.playMultiSound(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-string">'1.ogg'</span>, <span class="hljs-string">'2.ogg'</span>, <span class="hljs-string">'3.ogg'</span>, <span class="hljs-string">'4.ogg'</span>, <span class="hljs-string">'5.ogg'</span>), {<span class="hljs-attr">amp</span>:<span class="hljs-number">.5</span>, <span class="hljs-attr">delay</span>:<span class="hljs-number">.1</span>, <span class="hljs-attr">speed</span>:<span class="hljs-number">.5</span>});    
}</pre>
<br>
<br>
<br>
<br>
<p><a name="sources_listeners"></a></p>
<h3>Sources and listeners</h3>
<p>If you wish to avail of automatic amplitude scaling based on proximity of objects to each other, you will need to use sources and a listener. There is only one listener per scene, and it is usually the camera object. In the code below, a BabylonJS camera object is set to be the listener.  </p>
<pre class='hljs'><span class="hljs-keyword">var</span> camera = <span class="hljs-keyword">new</span> BABYLON.FreeCamera(<span class="hljs-string">"FreeCamera"</span>, <span class="hljs-keyword">new</span> BABYLON.Vector3(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>, <span class="hljs-number">-80</span>), scene);
marla.addListener(camera);</pre>
<blockquote>
<p><strong><em>Note:</em></strong> <em>if you plan to manage amplitude attenuation yourself you don't need add a listener. It's sole purpose is to provide positional information for sources.</em> </p>
</blockquote>
<p>Any number of sources can be added to a scene. Once created, they can be controlled using a range of special source functions, such as <a href="/docs/index.html#setsourceamplitude"><code>Marla.setSourceAmplitude()</code></a> or <a href="/docs/index.html#setsourcecutoff"><code>Marla.setSourceCutoff()</code></a>. Sources can be either dynamic, meaning their amplitude will be constantly updated based on their position relative to the scene's listener, or static, meaning their amplitude levels will need to be managed manually. To add a dynamic source to a scene, call <a href="/docs/index.html#addsource"><code>Marla.addSource()</code></a>. In the code below, the 'bestSoundEver.ogg' file is attached to the radio game object. Sources can be set up to play just once if the <code>oneShot</code> parameter is set to true. </p>
<pre class='hljs'><span class="hljs-keyword">var</span> radio = <span class="hljs-keyword">new</span> BABYLON.MeshBuilder.CreateBox(<span class="hljs-string">'Radio'</span>, {<span class="hljs-attr">height</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">depth</span>: <span class="hljs-number">0.5</span>}, scene);
radio.position = <span class="hljs-keyword">new</span> BABYLON.Vector3(<span class="hljs-number">-2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">-20</span>);
marla.addSource(radio, <span class="hljs-string">'bestSoundEver.ogg'</span>);</pre>
<p><a href="/docs/index.html#update"><code>Marla.update()</code></a> needs to be called in the game's main loop in order for to carry out automatic amplitude scaling based on the distance between sources and a listener. If <a href="/docs/index.html#update"><code>Marla.update()</code></a> is not called all sound will stay at the same amplitude until <a href="/docs/index.html#setsourceamplitude"><code>Marla.setSourceAmplitude()</code></a> is called.</p>
<p>To add a static sound source simply pass a "name" string to the first parameter of the <a href="/docs/index.html#addsource"><code>Marla.addSource()</code></a> function. The same "name" string should be used when controlling any aspect of the source. The code below shows an example a static sound source which will play at a constant level for the duration of the game. Static sound sources are useful for background music and sounds that don't need to have their amplitudes constantly readjusted. </p>
<pre class='hljs'>marla.addSource(<span class="hljs-string">"menu"</span>, <span class="hljs-string">"menu.wav"</span>);</pre>
<blockquote>
<p>Sound sources can be also be given named Csound instruments to process. See <a href="#named_instrument">below</a> for further details.</p>
</blockquote>
<br>
<br>
<br>
<br>
<p><a name="source_types"></a></p>
<h3>Controlling sources</h3>
<p>Source sources can be set up in a multitude of different ways. Optional parameters can determine if they start playing when the game does, or if they should play as a one-shot sample, in which case the the <a href="/docs/index.html#playsource"><code>Marla.playSource()</code></a> function can be used to trigger it at any point during the game. </p>
<p>Other parameters allow for distance scaling, amplitude scaling, and playback speed. A <code>randomInterval</code> parameter can be used to trigger random playback of samples. The <code>minInterval</code> parameter sets the minimum time between random plays.</p>
<blockquote>
<p>The minInterval parameter only works when the randomInterval is set to a value greater than 0</p>
</blockquote>
<br>
If an array of sound files is passed to the `clip` parameter, Marla will automatically sequence the files. They will play one after another by default, but can also be set to play randomly.
<p>A source may have a new file set dynamically at any point during the game. The parameters for fade in and out will determine how much of an overlap takes place when a new file is triggered. The <code>transition</code> parameter will set how the file starts playing. This is set to <code>immediate</code> by default. This means as soon as <a href="/docs/index.html#setsourcefile"><code>Marla.setSourceFile()</code></a> is called, the new file will start playing. If transition is set to <code>wait</code>, the current sample will finish playing back before the new one starts, depending of course on the fade times. </p>
<p><a name="procedural_events"></a></p>
<h3>Writing procedural events</h3>
<p>Although this framework provides various functions for playing back and controlling audio events, its real strenght lies in the fact that you can easily expose the power of Csound. This makes it very simple to create sound events on the fly. The simplest way to do this is to code some Csound instruments in the marla.csd file that automatically gets compiled when the game starts. Once the instrument is compiled it cane be triggered at run time using the
<code>Marla.sendEvent(string)</code> function.  </p>
<p>Procedural sound can also be added on the fly using the <code>Marla.addCustomSound()</code> function. For example, the following code creates a simple custom sound. The Csound code generates a simple sine wave with an exponential decay. </p>
<pre class='hljs'><span class="hljs-keyword">const</span> paddleSound =<span class="hljs-string">`
    instr PADDLE
        iFreq = p4
        kNum active "PADDLE"
        aEnv expon .5, p3, .001
        a1 oscili aEnv, cpsmidinn(iFreq)
        outs a1/kNum, a1/kNum
    endin`</span>;
marla.addCustomSound(paddleSound);</pre>
<p>When triggering this event, one must be careful to pass a frequency value as its 4th parameter. In this way the pitch of the sound can be dynamically altered each time its played. In the code below the custom sound is triggered each time a player presses the 'A' key. </p>
<pre class='hljs'><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.keys.A.isDown)
{   
    marla.sendEvent(<span class="hljs-string">'i"PADDLE" 0 1 '</span>+(<span class="hljs-number">50</span>+player.x).toString());    
}</pre>
<p><a name="realtime_sounds"></a></p>
<h3>Controlling sounds in real time</h3>
<p>Although the above code will play a different pitch each time it is triggered, the information sent to the instrument is 'init' time only. This means it can't be updated once the instrument starts. If you wish to control parameters of a custom sound in real time you can do so using named channels. These requires the use of the <code>chnget</code> opcode in your custom Csound instrument. The following code example creates a custom sound whose frequency is set by the player's x position. </p>
<pre class='hljs'><span class="hljs-keyword">const</span> paddleSound =<span class="hljs-string">`
    instr PLAYER
        kFreq chnget "frequency"
        a1 oscili aEnv, kFreq
        outs a1, a1
    endin`</span>;
marla.addCustomSound(paddleSound);</pre>
<p>The channel can be updated in the game loop by calling <code>Marla.setChannel(channel, value)</code>.</p>
<pre class='hljs'><span class="hljs-comment">//main rendering/game loop</span>
gameEngine.update(){
    marla.setChannel(<span class="hljs-string">'frequency'</span>, player.x);
}</pre>
<br>
<br>
<br>
<br>
<p><a name="other_js_engines"></a></p>
<h3>Adding support for other JS game engines</h3>
<p>This system is extremely lightweight, and is provided merely as a first step towards creating bespoke sound engines for JS based game.  </p>
<p>Apart from <code>Marla.addListener()</code> and the various <code>Marla::addSource()</code>, all of the functions in this framework are engine agnostic. These methods however work with objects that contains a name and position vector. If you want to add support for another game engine that doesn't support game objects, you will need to create a new class that contains a <code>name</code> and some kind of positional vector. You can then modify the <code>Marla.setSourceAmplitude(source, listener, scale)</code> function to set the correct distance between objects. Alternatively you can just use a "name" string with any of the <code>addSource()</code> functions and control amplitude manually. </p>
<br>
<br>
<br>
<br>
<p><a name="named_instrument"></a></p>
<h3>Using named instruments as sound clips</h3>
<p>If for example your marla.csd file contains a Csound instrument called <code>CHURCH_BELLS</code>, and would like Marla to automatically scale it's amplitude, you can pass the instrument name to <a href="/docs/index.html#addsource"><code>Marla.addSource()</code></a> in place of a sound file. In the following code we do just that.</p>
<pre class='hljs'><span class="hljs-keyword">var</span> radio = <span class="hljs-keyword">new</span> BABYLON.MeshBuilder.CreateBox(<span class="hljs-string">'Radio'</span>, {<span class="hljs-attr">height</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">depth</span>: <span class="hljs-number">0.5</span>}, scene);
radio.position = <span class="hljs-keyword">new</span> BABYLON.Vector3(<span class="hljs-number">-2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">-20</span>);
marla.addSource(radio, <span class="hljs-string">"CHURCH_BELLS"</span>);</pre>
<blockquote>
<p><strong><em>Note:</em></strong> <em>You cannot pass p-fields to any Csound instruments added as sources in the manner described above. If you want to have any real-time control over parameters use named channels.</em> </p>
</blockquote>

    
  </section>
</div>
          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='marla'>
      Marla
    </h3>
    
    
  </div>
  

  
    <div class='pre p1 fill-light mt0'>new Marla(gameEngine: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, filename: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>gameEngine</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Set the game engine being used, i.e., 'Babylonjs' or 'Phaser3'

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>filename</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>
            = <code>&#39;marla.csd&#39;</code>)</code>
	    the .csd file to compile.

          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">var</span> marla = <span class="hljs-keyword">new</span> Marla(<span class="hljs-string">"Babylonjs"</span>);</pre>
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Instance Members</div>
    <div class="clearfix">
  
    <div class='border-bottom' id='setaudiodirectory'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setAudioDirectory(dir)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Sets the default directory for audio assets.</p>

    <div class='pre p1 fill-light mt0'>setAudioDirectory(dir: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>dir</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    the audio assets directory, relative to this file.

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='addfiles'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>addFiles(files)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Adds list of file from server to local file system. All files used by the audio engine
during a game must be loaded in advance of their use.</p>

    <div class='pre p1 fill-light mt0'>addFiles(files: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>files</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>)</code>
	    Array contained all files to be loaded.

          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>marla.addFiles(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-string">'1.wav'</span>, <span class="hljs-string">'2.wav'</span>, <span class="hljs-string">'3.wav'</span>));</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='start'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>start(options)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Starts the audio engine.</p>

    <div class='pre p1 fill-light mt0'>start(options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Sets various options to controls how the source plays and behaves.

          </div>
          
          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>
              
                <tr>
  <td class='break-word'><span class='code bold'>options.ksmps</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>64</code>)
  </td>
  <td class='break-word'><span>Sets the number of samples in control cycle. Decreasing this will reduce latency, but may result in dropouts and glitchy audio. Higher values should result in smoother playback, but can lead to higher latency.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.logging</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>false</code>)
  </td>
  <td class='break-word'><span>Set to true to enable verbose logging of Csound during performance. Defaults to false.
</span></td>
</tr>


              
            </tbody>
          </table>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='playsound'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>playSound(filename, options)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Plays a sound file with optional parameters for delay, amplitude and speed.</p>

    <div class='pre p1 fill-light mt0'>playSound(filename: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>filename</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Name of audio file to be played. Note this file should already be added to the local server using the add files method. For now files need to be in uncompressed format, or mp3s. Support for other compressed formats will be added soon.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>
            = <code>{}</code>)</code>
	    Sets various options to controls how the sounds plays and behaves.

          </div>
          
          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>
              
                <tr>
  <td class='break-word'><span class='code bold'>options.delay</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>0</code>)
  </td>
  <td class='break-word'><span>Sets the amount of time that should pass before the sound plays. Defaults to 0.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.speed</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>1</code>)
  </td>
  <td class='break-word'><span>Sets playback speed. Defaults to 1
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.amp</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>1</code>)
  </td>
  <td class='break-word'><span>Defaults to 1.
</span></td>
</tr>


              
            </tbody>
          </table>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='playmultisound'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>playMultiSound(files, options)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Plays a sound file with optional parameters for delay, amplitude and speed.</p>

    <div class='pre p1 fill-light mt0'>playMultiSound(files: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>, options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>files</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>)</code>
	    An array of audio files to be played back. Make sure all files have been added to the local server using the addFiles() method.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>
            = <code>{}</code>)</code>
	    Sets various options to controls how the sounds plays and behaves.

          </div>
          
          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>
              
                <tr>
  <td class='break-word'><span class='code bold'>options.delay</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>0</code>)
  </td>
  <td class='break-word'><span>Sets the amount of time that should pass before the sound plays. Defaults to 0.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.speed</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>1</code>)
  </td>
  <td class='break-word'><span>Sets playback speed.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.amp</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>1</code>)
  </td>
  <td class='break-word'><span>Defaults to 1.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.index</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>-1</code>)
  </td>
  <td class='break-word'><span>Set this to a number equal or greater to 0 to trigger specific files from the files array. The default value of -1 instructs Marla to pick a file at random.
</span></td>
</tr>


              
            </tbody>
          </table>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='addlistener'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>addListener(listener)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Adds a scene listener.</p>

    <div class='pre p1 fill-light mt0'>addListener(listener: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>listener</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Listener object

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='addsource'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>addSource(source, clip, options)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Adds a sound source to the scene.</p>

    <div class='pre p1 fill-light mt0'>addSource(source: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, clip: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>source</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Source object, or string with name of source. Source objects are dynamic, and will have their amplitude altered according to their proximity to the scene's listener. Sources passed as strings are static. You will need to alter their amplitude manually using @setSourceAmplitude

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>clip</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Name of an audio file, or files(see options) to be played. Can also be the named of a Csound instrument. If this is an audio file name, make sure that it already added to the local server using the add files method. MP3s are not supported, but .ogg, .flac, wav and aif are. Named instrument can also be sound sources with the one restriction that they shouldn't accept any p-fields. They should also avoid making reference to p2 or p3.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>
            = <code>{}</code>)</code>
	    Sets various options to controls how the source plays and behaves.

          </div>
          
          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>
              
                <tr>
  <td class='break-word'><span class='code bold'>options.amp</span> <code class='quiet'>float</code>
  
    (default <code>1</code>)
  </td>
  <td class='break-word'><span>the amplitude factor. This value will be multiplied by the source output to apply amplitude scaling.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.scaling</span> <code class='quiet'>float</code>
  
    (default <code>1</code>)
  </td>
  <td class='break-word'><span>Sets a scaling factor. Values greater than 1 will cause greater amplitude attenuation. Values less than 1 will cause decreased attenuation. This usually needs some tweaking to get right, and will depend to a large extent on the game engine.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.oneShot</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code>
  
    (default <code>false</code>)
  </td>
  <td class='break-word'><span>Setting to this true will cause the sound source to finish after a single play. Only works with sound files.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.order</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>&quot;forward&quot;</code>)
  </td>
  <td class='break-word'><span>Determines how the files will be played back. Set to 
<code>random</code>
 for random play back. The default is 
<code>forward</code>
 which will cause the files to play one after another.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.randomRange</span> <code class='quiet'>float</code>
  
    (default <code>0</code>)
  </td>
  <td class='break-word'><span>A non-zero value here will cause the source to play at random intervals. The value passed here will determine the random range of delay before the next playback.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.minInterval</span> <code class='quiet'>float</code>
  
    (default <code>0</code>)
  </td>
  <td class='break-word'><span>Sets the minimum amount of time to wait in seconds before a sound is repeated. This value is summed to the random value produced above to give the time interval between plays.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.fadeIn</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>0</code>)
  </td>
  <td class='break-word'><span>Determines the length of amplitude fade in for source. Defaults to 0. Note this applies to the entire duration of the source, and not to the clip being played.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.fadeOut</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>0</code>)
  </td>
  <td class='break-word'><span>Determines the length of amplitude fade out for source. Defaults to 0. Note this applies to the entire duration of the source, and not to the clip being played.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.speed</span> <code class='quiet'>float</code>
  
    (default <code>1</code>)
  </td>
  <td class='break-word'><span>Sets a playback speed. 1 is the default and will cause no change in playback speed from original recording.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.transition</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>&#39;immediate&#39;</code>)
  </td>
  <td class='break-word'><span>Determines how the next sample will appear once 
<code>Marla.setNextFile()</code>
 is called. Defaults to "immediate", which will cause the next sample to start playing immediately. If this is set to "wait", the current sample will be allowed to finish before the next sample starts.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.playOnAwake</span> <code class='quiet'>any</code>
  
    (default <code>true</code>)
  </td>
  <td class='break-word'><span></span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.fileIndex</span> <code class='quiet'>any</code>
  
    (default <code>0</code>)
  </td>
  <td class='break-word'><span></span></td>
</tr>


              
            </tbody>
          </table>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-comment">//BabylonJs</span>
<span class="hljs-keyword">var</span> source = <span class="hljs-keyword">new</span> BABYLON.Mesh.CreateBox(<span class="hljs-string">"Source"</span>, <span class="hljs-number">2</span>, scene);
marla.addSource(source, <span class="hljs-string">'pianoMood.wav'</span>, {<span class="hljs-attr">amp</span>:<span class="hljs-number">1</span>});

<span class="hljs-comment">//Phaser3</span>
<span class="hljs-keyword">this</span>.player = <span class="hljs-keyword">this</span>.physics.add.image(<span class="hljs-number">400</span>, <span class="hljs-number">450</span>, <span class="hljs-string">'assets'</span>, <span class="hljs-string">'player'</span>)
marla.addSource(<span class="hljs-keyword">this</span>.player, <span class="hljs-string">'pianoMood.wav'</span>, {<span class="hljs-attr">amp</span>:<span class="hljs-number">1</span>});

<span class="hljs-comment">//to create a static sound source just pass a string as the object name, marla.update() will have no affect on sources created in this way</span>
marla.addSource(source, <span class="hljs-string">'pianoMood.wav'</span>, {<span class="hljs-attr">amp</span>:<span class="hljs-number">1</span>});</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='setsourceamplitude'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setSourceAmplitude(source, value, fadeTime)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Set sound source amplitude.</p>

    <div class='pre p1 fill-light mt0'>setSourceAmplitude(source: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, value: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, fadeTime: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>source</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Listener object

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>value</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    A number between 0 and 1

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>fadeTime</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>0</code>)</code>
	    Total length of time for amplitude change to occur

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='setsourcespeed'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setSourceSpeed(source, speed, fadeTime)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Sets the playback speed of a sound source.</p>

    <div class='pre p1 fill-light mt0'>setSourceSpeed(source: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, speed: speed, fadeTime: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>source</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Source object.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>speed</span> <code class='quiet'>(speed)</code>
	    Sets playback speed.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>fadeTime</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>0</code>)</code>
	    Total length of time for change in speed to occur

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='setsourcereverb'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setSourceReverb(source, feedback, cutoff, fadeTime)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Add reverb to a sound source.</p>

    <div class='pre p1 fill-light mt0'>setSourceReverb(source: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, feedback: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, cutoff: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, fadeTime: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>source</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Source object

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>feedback</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    Set the amount of reverb between 0 and 1. 1

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>cutoff</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    Sets the cutoff frequency of the low-pass filters in the reverb feedback loop

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>fadeTime</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>0</code>)</code>
	    Total length of time for change to occur

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='setsourcepan'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setSourcePan(source, position, fadeTime)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Add reverb to a sound source.</p>

    <div class='pre p1 fill-light mt0'>setSourcePan(source: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, position: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, fadeTime: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>source</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Source object

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>position</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    Set the position of the source. -1: full to the left, 0: centred, and 1: full to the right

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>fadeTime</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>0</code>)</code>
	    Total length of time for change to occur

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='setsourcedelay'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setSourceDelay(source, delay, fadeTime)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Add reverb to a sound source.</p>

    <div class='pre p1 fill-light mt0'>setSourceDelay(source: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, delay: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, fadeTime: any)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>source</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Source object

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>delay</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    length of delay time in seconds

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>fadeTime</span> <code class='quiet'>(any
            = <code>0</code>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='setsourcecutoff'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setSourceCutOff(source, cutoff, fadeTime)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Set the low pass cut-off frequency of an audio source.</p>

    <div class='pre p1 fill-light mt0'>setSourceCutOff(source: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, cutoff: float, fadeTime: any)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>source</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Source object.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>cutoff</span> <code class='quiet'>(float)</code>
	    Cut-off frequency.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>fadeTime</span> <code class='quiet'>(any
            = <code>0</code>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='setsourcefile'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setSourceFile(source, filename, options, clip)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Sets next source file to play, with optional parameter to determine when it starts.</p>

    <div class='pre p1 fill-light mt0'>setSourceFile(source: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, filename: any, options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, clip: speed)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>source</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Source object

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>filename</span> <code class='quiet'>(any)</code>
	    
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Sets various options to controls how the sounds plays and behaves.

          </div>
          
          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>
              
                <tr>
  <td class='break-word'><span class='code bold'>options.fadeOut</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>0</code>)
  </td>
  <td class='break-word'><span>Determines the length of amplitude fade out for source. Defaults to 0. Note this applies to the entire duration of the source, and not to the clip being played.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.fadeIn</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>0</code>)
  </td>
  <td class='break-word'><span>Determines the length of amplitude fade in for source. Defaults to 0. Note this applies to the entire duration of the source, and not to the clip being played.
</span></td>
</tr>


              
                <tr>
  <td class='break-word'><span class='code bold'>options.transition</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>&quot;immediate&quot;</code>)
  </td>
  <td class='break-word'><span>Determines how the next sample will appear. Defaults to "immediate", which will cause the next sample to start playing immediately. If this is set to "wait", the current sample will be allowed to finish before the next sample starts.
</span></td>
</tr>


              
            </tbody>
          </table>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>clip</span> <code class='quiet'>(speed)</code>
	    Name of audio file to play

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='playsource'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>playSource(source)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Plays a source that was initialised with playOnAwake set to false.</p>

    <div class='pre p1 fill-light mt0'>playSource(source: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>source</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Source object.

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='pausesource'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>pauseSource(source)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Pauses a source.</p>

    <div class='pre p1 fill-light mt0'>pauseSource(source: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>source</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Source object.

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='setcontrolchannel'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setControlChannel(channel, value)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Set the value of a named channel.</p>

    <div class='pre p1 fill-light mt0'>setControlChannel(channel: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, value: float)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>channel</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Name of channel to send value to.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>value</span> <code class='quiet'>(float)</code>
	    Value sent to 
<code>channel</code>
.

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='removesource'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>removeSource(source)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Remove audio source from scene.</p>

    <div class='pre p1 fill-light mt0'>removeSource(source: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>source</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    Listener object

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='update'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>update()</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>update() should be called in the game's update loop. It will calculate the correct amplitude of each source in the scene relative to the scenes main listener.</p>

    <div class='pre p1 fill-light mt0'>update()</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='sendevent'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>sendEvent(scoreEvent)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Trigger an audio event via the Csound score line</p>

    <div class='pre p1 fill-light mt0'>sendEvent(scoreEvent: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>scoreEvent</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Event strings consisting of instrument name or number, followed by start time in seconds, a duration in seconds. All other parameters are optional and will depend on the custom sounds being triggered.

          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>marla.sendEvent(<span class="hljs-string">'i"SHOOT" 0 1 60'</span>);</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='addcustomsound'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>addCustomSound(instr)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Compiles a Csound instrument in the form of a string.</p>

    <div class='pre p1 fill-light mt0'>addCustomSound(instr: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>instr</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    String containing instrument definition

          </div>
          
        </div>
      
    </div>
  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">const</span> paddleSound =<span class="hljs-string">`
instr PADDLE
    aEnv expon .5, p3, .001
    a1 oscili aEnv, cpsmidinn(p4)
    outs a1, a1
endin`</span>;
marla.addCustomSound(paddleSound);</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
</div>

  

  

  
</section>

          
        
      </div>
    </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/split.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
